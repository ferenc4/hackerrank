apply plugin: 'idea'
apply plugin: 'maven'
apply plugin: 'java'

idea {
    project {
        jdkName = '1.8'
        languageLevel = '1.8'
        vcs = 'Git'
    }

    module {
        downloadSources = true
        downloadJavadoc = true
    }
}

group = 'com.ferenc4'

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'info.cukes', name: 'cucumber-java8', version: '1.2.4'
    testCompile group: 'info.cukes', name: 'cucumber-junit', version: '1.2.4'
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

def argsForCuke = ['--plugin', "html:build/test-results-html", '--glue', 'steps', 'src/test/gherkin']
def argsForCukeWip = ['--tags', '@wip', '--plugin', "html:build/test-results-html", '--glue', 'steps', 'src/test/gherkin']

task cucumber() {
    dependsOn assemble, compileTestJava, processTestResources
    doLast {
        javaexec {
            main = "cucumber.api.cli.Main"
            classpath = configurations.testRuntime + sourceSets.main.output + sourceSets.test.output
            args = argsForCuke
        }
    }
    group = 'verification'
}
task cucumberWip() {
    dependsOn assemble, compileTestJava, processTestResources
    doLast {
        javaexec {
            main = "cucumber.api.cli.Main"
            classpath = configurations.testRuntime + sourceSets.main.output + sourceSets.test.output
            args = argsForCukeWip
        }
    }
    group = 'verification'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.11'
}